---
# ManagedNamespace Composite Resource (XR)
# Generated by Backstage scaffolder
apiVersion: openportal.dev/v1alpha1
kind: ManagedNamespace
metadata:
  name: ${{ values.xrName }}
  labels:
    managed-by: backstage
    namespace-name: ${{ values.name }}
  annotations:
    backstage.io/created-by: ${{ user.entity.metadata.name }}
spec:
  # Namespace name
  name: ${{ values.name }}

  # RBAC Configuration
  # All email addresses are validated against Microsoft Entra ID

  # Owners (minimum 2 required)
  # - Can manage the ManagedNamespace XR itself
  # - Full admin access within the namespace
  owners:
{%- for owner in values.owners %}
    - {{ owner }}
{%- endfor %}
{%- if values.maintainers and values.maintainers | length > 0 %}

  # Maintainers (optional)
  # - Can create, edit, and delete resources within the namespace
  maintainers:
{%- for maintainer in values.maintainers %}
    - {{ maintainer }}
{%- endfor %}
{%- endif %}
{%- if values.readers and values.readers | length > 0 %}

  # Readers (optional)
  # - Read-only access to all resources within the namespace
  readers:
{%- for reader in values.readers %}
    - {{ reader }}
{%- endfor %}
{%- endif %}
